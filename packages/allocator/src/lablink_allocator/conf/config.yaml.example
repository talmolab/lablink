# LabLink Allocator Configuration Template
# This is an example configuration file for the LabLink Allocator Service.
# Copy this file to config.yaml and customize it for your deployment.

# Database configuration
db:
  dbname: "lablink_db"
  user: "lablink"
  password: "CHANGE_ME"  # IMPORTANT: Change this password for security
  host: "localhost"
  port: 5432
  table_name: "vms"
  message_channel: "vm_updates"

# Machine/VM configuration
machine:
  machine_type: "g4dn.xlarge"  # AWS EC2 instance type for client VMs
  image: "ghcr.io/your-org/your-client-image:latest"  # Docker image for client VMs
  ami_id: "ami-067cc81f948e50e06"  # AWS AMI ID (Ubuntu with GPU support)
  repository: "https://github.com/your-org/your-data-repo.git"  # Optional: Git repo to clone
  software: "your-software"  # Name of your software (used for file identification)
  extension: "ext"  # File extension for your software (e.g., "slp" for SLEAP)

# Application configuration
app:
  admin_user: "admin"
  admin_password: "CHANGE_ME"  # IMPORTANT: Change this password for security
  region: "us-west-2"  # AWS region for deployment

# DNS configuration (optional)
dns:
  enabled: false  # Set to true to enable DNS
  domain: ""  # Your domain name (e.g., "example.com")
  app_name: "lablink"  # Application name used in subdomain
  pattern: "auto"  # DNS naming pattern: "auto", "app-only", or "custom"
  custom_subdomain: ""  # Used when pattern="custom"
  create_zone: false  # Whether to create a new Route 53 hosted zone

# DNS Pattern Examples:
# pattern: "auto"
#   - prod environment: lablink.example.com
#   - test environment: test.lablink.example.com
#   - dev environment: dev.lablink.example.com
#
# pattern: "app-only"
#   - All environments: lablink.example.com
#
# pattern: "custom"
#   - Uses custom_subdomain value (e.g., "my-custom.example.com")

# S3 bucket for Terraform state
bucket_name: "tf-state-lablink-allocator-bucket"

# Example: Talmo Lab SLEAP Configuration
# This is included as a reference example only
#
# machine:
#   machine_type: "g4dn.xlarge"
#   image: "ghcr.io/talmolab/lablink-client-base-image:linux-amd64-test"
#   ami_id: "ami-067cc81f948e50e06"
#   repository: "https://github.com/talmolab/sleap-tutorial-data.git"
#   software: "sleap"
#   extension: "slp"
#
# dns:
#   enabled: true
#   domain: "sleap.ai"
#   app_name: "lablink"
#   pattern: "auto"
